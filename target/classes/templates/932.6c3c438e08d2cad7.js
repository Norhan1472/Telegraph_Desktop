"use strict";(self.webpackChunktelegraph=self.webpackChunktelegraph||[]).push([[932],{5932:(V,c,a)=>{a.r(c),a.d(c,{IncomingModule:()=>P});var u=a(6814);const p=[{header:"\u0627\u0644\u062d\u0627\u0644\u0629 ",type:"dropdown",id:"status",name:"status",for:"status",defaultValue:null,controlName:"status",isDropDown:{label:"statusName",options:[],value:"statusCode",placeHolder:"status"}},{header:" \u0631\u0645\u0632  \u0627\u0644\u0648\u0627\u0631\u062f  ",type:"text",id:"incomingSeq",name:"incomingSeq",for:"incomingSeq",defaultValue:null,isDropDown:!1,controlName:"incomingSeq"},{header:" \u0627\u0644\u0644\u063a\u0629",type:"dropdown",id:"lang",name:"lang",for:"lang",defaultValue:null,controlName:"lang",isDropDown:{options:[]}},{header:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e",type:"date",id:"fromDate",name:"fromDate",for:"fromDate",defaultValue:null,isDropDown:!0,controlName:"fromDate"},{header:" \u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e",type:"date",id:"endDate",name:"endDate",for:"endDate",defaultValue:null,isDropDown:!0,controlName:"endDate"},{header:"\u0643\u0648\u062f \u0645\u0643\u062a\u0628 \u0627\u0644\u0635\u0627\u062f\u0631",type:"dropdown",id:"officeCode",name:"officeCode",for:"officeCode",defaultValue:null,controlName:"officeCode",isDropDown:{label:"officeName",options:[],value:"officeCode",placeHolder:"select"}},{header:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0623\u0635\u0644\u0649",type:"text",id:"tghCode",name:"tghCode",for:"tghCode",defaultValue:null,isDropDown:!1,controlName:"tghCode"},{header:"\u0627\u0644\u062f\u0648\u0644\u0629",type:"dropdown",id:"country",name:"country",for:"country",defaultValue:"EG",controlName:"country",isDropDown:{label:"englishName",options:[],value:"countryCode",placeHolder:"\u0627\u062e\u062a\u0631 \u0627\u0644\u062f\u0648\u0644\u0629"}},{header:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629",type:"dropdown",id:"city",name:"city",for:"city",defaultValue:null,controlName:"city",isDropDown:{label:"cityName",options:[],value:"cityCode",placeHolder:"select"}},{header:"  \u0646\u0648\u0639 \u0627\u0644\u0632\u0631\u0643\u0634\u0629  ",type:"dropdown",id:"decoration",name:"decoration",for:"decoration",defaultValue:null,controlName:"decoration",isDropDown:{label:"label",options:[],value:"value"}},{header:"  \u0627\u0644\u0646\u0645\u0648\u0630\u062c  ",type:"dropdown",id:"template",name:"template",for:"template",defaultValue:null,controlName:"template",isDropDown:{label:"tempName",options:[],value:"tempCode",placeHolder:"select"}},{header:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062a\u062a\u0627\u0628\u0639\u0649",type:"number",id:"tghId",name:"tghId",for:"tghId",defaultValue:null,isDropDown:!1,controlName:"tghId"},{header:"\u0639\u0644\u0645 \u0627\u0644\u0648\u0635\u0648\u0644 ",type:"number",id:"deliveryNotice",name:"deliveryNotice",for:"deliveryNotice",defaultValue:null,isDropDown:!1,controlName:"deliveryNotice"},{header:"\u0625\u062f\u0627\u0631\u0649",type:"number",id:"admin",name:"admin",for:"admin",defaultValue:null,isDropDown:!1,controlName:"admin"}],d={tghDate:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u0631\u0642\u064a\u0647",seqNo:"    \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062a\u062a\u0627\u0628\u0639\u0649",incomingSeq:"     \u0631\u0645\u0632 \u0627\u0644\u0648\u0631\u0648\u062f",tghCode:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0623\u0635\u0644\u0649",recName:"\u0627\u0644\u0645\u0631\u0633\u0644 \u0625\u0644\u064a\u0647 ",address:" \u0627\u0644\u0639\u0646\u0648\u0627\u0646   ",senderName:"   \u0627\u0644\u0631\u0627\u0633\u0644",status:" \u062d\u0627\u0644\u0629 \u0627\u0644\u0628\u0631\u0642\u064a\u0629  ",noOfWords:"\u0639\u062f\u062f \u0627\u0644\u0643\u0644\u0645\u0627\u062a",cost:" \u0627\u0644\u062a\u0643\u0644\u0641\u0647  ",sendDate:" \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0631\u0633\u0627\u0644  ",originOffice:"  \u0627\u0644\u0645\u0643\u062a\u0628 \u0627\u0644\u0635\u0627\u062f\u0631    ",origin:" \u0631\u0645\u0632 \u0627\u0644\u0635\u0627\u062f\u0631  "};var e=a(2029),h=a(5744),m=a(8209),f=a(7650),g=a(8530),y=a(265),v=a(7383),C=a(1351),D=a(2403),N=a(4230);const S=["printPage"];function b(i,x){if(1&i){const t=e.EpF();e.TgZ(0,"app-actions-list",7),e.NdJ("onAction",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openPopup())})("onPrint",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.print())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("status",t.status)("criatria",t.form.value)("incomingPage",!0)}}let w=(()=>{class i{constructor(t,o,n,s,l){this.queueService=t,this.router=o,this.exportService=n,this.mtsModuleService=s,this.httpService=l,this.searchedData=[],this.ids=[]}ngOnInit(){this.formCols=p,this.form=this.mtsModuleService.create_form_by_cols(this.formCols),this.queueService.getLookups(this.formCols),this.createTableCols(),this.getData({value:this.form.value})}createTableCols(){let t=[],o={field:"",header:"",display:1};for(let n in d)o.field=n,o.header=d[n],o.display=1,t.push(Object.assign({},o));this.tableCols=t}changeStatus(t){if("status"==t.name&&(this.localStatus=t.value,console.log(this.status,t,t.status)),"country"==t.name){console.log(this.form.controls.country.value);let o=this.form.controls.country.value;this.queueService.setCityList(o),this.queueService.getLang(o)}"city"!=t.name&&"country"!=t.name||this.queueService.setOfficeList(this.form.controls.city.value)}onAction(t){console.log("rowData",t),"Edit"==t.type&&this.router.navigate([`in/details/${t.value.seqNo}`]),"Export"==t.type&&this.exportExcel()}exportExcel(){let t=document.createElement("table"),o=t.insertRow(),n=[];this.tableCols.forEach(s=>{n.push(s.field)});for(let s of n){let l=document.createElement("th");l.innerText=s,o.appendChild(l)}for(let s of this.searchedData){let l=t.insertRow();for(let r=0;r<n.length;r++)l.insertCell().innerText=s[n[r]]}console.log(n),console.log(t),this.exportService.export(t,"\u0627\u0644\u0648\u0627\u0631\u062f")}openPopup(){}getData(t){this.status=null,this.loading=!0,console.log(t),console.log(t.value),this.httpService.post("inComing/search",t.value).subscribe(o=>{console.log(o),o.body?(this.searchedData=o.body.data,this.count=o.body.count,console.log(this.searchedData),this.loading=!1,this.searchedData.map(n=>{this.ids.push(n.seqNo)}),console.log(this.ids)):(this.loading=!1,this.searchedData=[])},o=>{this.loading=!1,this.searchedData=[]}),this.status=this.localStatus,console.log(this.status,this.localStatus)}print(){this.printPage.getPrintData(this.ids)}reset(){this.form.patchValue({country:"EG"}),this.searchedData=[]}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(h.g),e.Y36(m.F0),e.Y36(f.T),e.Y36(g._),e.Y36(y.O))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-incoming"]],viewQuery:function(o,n){if(1&o&&e.Gf(S,5),2&o){let s;e.iGM(s=e.CRH())&&(n.printPage=s.first)}},decls:11,vars:12,consts:[[3,"status","criatria","incomingPage","onAction","onPrint",4,"ngIf"],[1,"m-4","count-tgh"],[2,"color","red"],[3,"form","cols","nCols","action","reset","selectedChange","onSubmit","onReset"],[3,"cols","data","show_edit","loading","show_export","btn_click"],[2,"display","none"],["printPage",""],[3,"status","criatria","incomingPage","onAction","onPrint"]],template:function(o,n){1&o&&(e.YNc(0,b,1,3,"app-actions-list",0),e.TgZ(1,"p",1)(2,"span"),e._uU(3,"\u0639\u062f\u062f \u0627\u0644\u0628\u0631\u0642\u064a\u0627\u062a \u0641\u0649 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"),e.qZA(),e._uU(4," : "),e.TgZ(5,"span",2),e._uU(6),e.qZA()(),e.TgZ(7,"mts-form",3),e.NdJ("selectedChange",function(l){return n.changeStatus(l)})("onSubmit",function(l){return n.getData(l)})("onReset",function(){return n.reset()}),e.qZA(),e.TgZ(8,"mts-table",4),e.NdJ("btn_click",function(l){return n.onAction(l)}),e.qZA(),e._UZ(9,"app-print-page",5,6)),2&o&&(e.Q6J("ngIf",n.searchedData.length>0&&n.status),e.xp6(6),e.Oqu(n.count),e.xp6(1),e.Q6J("form",n.form)("cols",n.formCols)("nCols",3)("action","search")("reset",!0),e.xp6(1),e.Q6J("cols",n.tableCols)("data",n.searchedData)("show_edit",!0)("loading",n.loading)("show_export",!0))},dependencies:[u.O5,v.$,C.U,D.a,N.k],styles:[".count-tgh[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:bolder;font-size:15px!important}"]})}return i})();var _=a(404),I=a(4973);const T=[{path:"",component:w}];let P=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[u.ez,m.Bz.forChild(T),I.m,_.L]})}return i})()}}]);
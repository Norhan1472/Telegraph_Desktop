"use strict";(self.webpackChunktelegraph=self.webpackChunktelegraph||[]).push([[796],{7796:(C,m,r)=>{r.r(m),r.d(m,{OfficialReportModule:()=>S});var f=r(6814);const c=[{header:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062a\u062a\u0627\u0628\u0639\u0649 ",type:"text",id:"seqNo",name:"seqNo",for:"seqNo",defaultValue:null,controlName:"seqNo"},{header:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0623\u0635\u0644\u0649 ",type:"text",id:"tghCode",name:"tghCode",for:"tghCode",defaultValue:null,controlName:"tghCode"},{header:"\u0631\u0642\u0645 \u0627\u0644\u0645\u062d\u0631\u0631  ",type:"number",id:"genId",name:"genId",for:"genId",defaultValue:null,controlName:"genId"},{header:"\u0631\u0645\u0632 \u0627\u0644\u0635\u0627\u062f\u0631 ",type:"text",id:"outgoingSeq",name:"outgoingSeq",for:"outgoingSeq",defaultValue:null,controlName:"outgoingSeq"}],d={seqNo:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062a\u062a\u0627\u0628\u0639\u0649",tghId:"\u0643\u0648\u062f \u0627\u0644\u0628\u0631\u0642\u064a\u0629",billTelNo:"\u0631\u0642\u0645 \u0627\u0644\u0645\u062d\u0627\u0633\u0628\u0629",callerName:"\u0627\u0633\u0645 \u0627\u0644\u0645\u062a\u0635\u0644",noOfWords:"\u0639\u062f\u062f \u0627\u0644\u062d\u0631\u0648\u0641",recName:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u0644\u0645",senderName:"\u0627\u0633\u0645 \u0627\u0644\u0631\u0627\u0633\u0644",tghDate:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u0631\u0642\u064a\u0629",tghCode:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0627\u0635\u0644\u0649",officeName:"\u0645\u0643\u062a\u0628 \u0627\u0644\u0648\u0627\u0631\u062f",originOffice:"\u0645\u0643\u062a\u0628 \u0627\u0644\u0635\u0627\u062f\u0631"};var t=r(2029),g=r(5744),D=r(265),p=r(1351),u=r(2403),b=r(7417);const e=["printDiv"];function o(l,_){if(1&l&&(t.TgZ(0,"div",7)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA()()),2&l){const n=_.$implicit;t.xp6(2),t.Oqu(n.key),t.xp6(2),t.Oqu(n.value)}}function s(l,_){if(1&l&&(t.TgZ(0,"div",8)(1,"p",9),t._uU(2),t.qZA()()),2&l){const n=_.$implicit;t.xp6(2),t.Oqu(n.value)}}function v(l,_){if(1&l&&(t.TgZ(0,"div",2)(1,"div")(2,"div",3)(3,"p"),t._uU(4,"\u0644\u0645\u0646 \u064a\u0647\u0645\u0647 \u0627\u0644\u0623\u0645\u0631"),t.qZA(),t.TgZ(5,"p",4),t._uU(6,"\u0635\u0648\u0631\u0629 \u0631\u0633\u0645\u064a\u0629 \u0644\u0628\u0631\u0642\u064a\u0629"),t.qZA()(),t.TgZ(7,"div",3),t._uU(8),t.qZA(),t.TgZ(9,"div",3)(10,"span"),t._uU(11," \u0631\u0642\u0645 \u0627\u0644\u062a\u0642\u0631\u064a\u0631"),t.qZA(),t._uU(12," : "),t.TgZ(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"div",3),t._uU(16),t.qZA(),t.YNc(17,o,5,2,"div",5),t.ALo(18,"keyvalue"),t.TgZ(19,"div",3),t._uU(20),t.qZA(),t.YNc(21,s,3,1,"div",6),t.ALo(22,"keyvalue"),t.qZA()()),2&l){const n=t.oxw();t.xp6(8),t.Oqu(n.br),t.xp6(6),t.Oqu(n.officialData["\u0631\u0642\u0645 \u0627\u0644\u062a\u0642\u0631\u064a\u0631"]),t.xp6(2),t.Oqu(n.br),t.xp6(1),t.Q6J("ngForOf",t.lcZ(18,6,n.officialData.officialTelegraphMessageDetails)),t.xp6(3),t.Oqu(n.br),t.xp6(1),t.Q6J("ngForOf",t.lcZ(22,8,n.officialData.officialTelegraphDetails))}}let O=(()=>{class l{constructor(n,i){this.httpService=n,this.toastService=i,this.br="---------------------------------------------------------------------------------------------------------------------------"}ngOnInit(){}getData(n){this.httpService.get(`OFFICIAL_TELEGRAPH/getOfficialTelegraphPage?tghId=${n}&tghCode`).subscribe(i=>{i.body?(this.officialData=i.body,setTimeout(()=>{this.print()},1e3)):this.toastService.showAlert("error",i.clientMessage,i.clientMessage)})}getPrintData(n){this.httpService.post("Queue/printTGH",n).subscribe(i=>{this.officialData=i.body,setTimeout(()=>{this.print()},1e3)})}print(){console.log("sdfvb");let n=this.printDiv.nativeElement.innerHTML;try{let i=document.createElement("iframe");i.style.display="none",document.body.appendChild(i);let a=i?.contentWindow?.document;a?.open(),a?.write(n),a?.close(),i.contentWindow?.focus(),i.contentWindow?.print()}catch(i){console.error("An error occurred while printing:",i)}}static#t=this.\u0275fac=function(i){return new(i||l)(t.Y36(D.O),t.Y36(b.k))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-print-official"]],viewQuery:function(i,a){if(1&i&&t.Gf(e,5),2&i){let h;t.iGM(h=t.CRH())&&(a.printDiv=h.first)}},decls:3,vars:1,consts:[["printDiv",""],["class","row","style","font-weight: 500;",4,"ngIf"],[1,"row",2,"font-weight","500"],[2,"text-align","center"],[2,"font-size","20px !important"],["style","display: flex; justify-content: space-between;direction: rtl",4,"ngFor","ngForOf"],["style","display: flex; justify-content: start ;direction: rtl;",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","space-between","direction","rtl"],[2,"display","flex","justify-content","start","direction","rtl"],[2,"margin","5px"]],template:function(i,a){1&i&&(t.TgZ(0,"div",null,0),t.YNc(2,v,23,10,"div",1),t.qZA()),2&i&&(t.xp6(2),t.Q6J("ngIf",a.officialData))},dependencies:[f.sg,f.O5,f.Nd],styles:[".width30[_ngcontent-%COMP%]{width:30%!important}"]})}return l})();const T=["officialReport"];let A=(()=>{class l{constructor(n,i){this.queueService=n,this.httpService=i,this.data=[],this.tableCols=[],this.loading=!1}ngOnInit(){this.createTableCols(),this.cols=c,this.form=this.queueService.initForm(c)}getData(n){this.httpService.post("OFFICIAL_TELEGRAPH/search",n.value).subscribe(i=>{this.data=i.body.length>0?i.body:[]})}reset(){this.form.reset()}printOfficial(n){console.log(n),this.officialReportComponent.getData(n.value.tghId)}createTableCols(){let n=[],i={field:"",header:"",display:1};console.log(d);for(let a in d)i.field=a,i.header=d[a],i.display=1,n.push(Object.assign({},i));this.tableCols=n,console.log(this.tableCols)}static#t=this.\u0275fac=function(i){return new(i||l)(t.Y36(g.g),t.Y36(D.O))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-official-report"]],viewQuery:function(i,a){if(1&i&&t.Gf(T,5),2&i){let h;t.iGM(h=t.CRH())&&(a.officialReportComponent=h.first)}},decls:4,vars:9,consts:[[3,"form","cols","nCols","action","reset","onSubmit","onReset"],[3,"cols","data","show_print","loading","btn_click"],[2,"display","none"],["officialReport",""]],template:function(i,a){1&i&&(t.TgZ(0,"mts-form",0),t.NdJ("onSubmit",function(y){return a.getData(y)})("onReset",function(){return a.reset()}),t.qZA(),t.TgZ(1,"mts-table",1),t.NdJ("btn_click",function(y){return a.printOfficial(y)}),t.qZA(),t._UZ(2,"app-print-official",2,3)),2&i&&(t.Q6J("form",a.form)("cols",a.cols)("nCols",2)("action","search")("reset",!0),t.xp6(1),t.Q6J("cols",a.tableCols)("data",a.data)("show_print",!0)("loading",a.loading))},dependencies:[p.U,u.a,O]})}return l})();var U=r(4973),E=r(8209);const I=[{path:"",component:A}];let S=(()=>{class l{static#t=this.\u0275fac=function(i){return new(i||l)};static#e=this.\u0275mod=t.oAB({type:l});static#i=this.\u0275inj=t.cJS({imports:[f.ez,E.Bz.forChild(I),U.m]})}return l})()},265:(C,m,r)=>{r.d(m,{O:()=>t});var f=r(3155),c=r(2029),d=r(9862);let t=(()=>{class g{constructor(p){this.httpClient=p}get(p){return this.httpClient.get(`${f.D.apiURL}/${p}`)}post(p,u){return this.httpClient.post(`${f.D.apiURL}/${p}`,u)}static#t=this.\u0275fac=function(u){return new(u||g)(c.LFG(d.eN))};static#e=this.\u0275prov=c.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},5744:(C,m,r)=>{r.d(m,{g:()=>p});var f=r(6223),c=r(7398),d=r(6814),t=r(2029),g=r(265),D=r(8209);let p=(()=>{class u{constructor(e,o){this.httpService=e,this.router=o,this.officelist=void 0,this.city=void 0,this.cols=[]}initForm(e){let s,o={};for(const v of e)o[v.name]=new f.NI(v.defaultValue||"",v.required?f.kI.required:null);return s=new f.cw(o),s}getLookups(e){this.cols=e;for(const o of this.cols)o.isDropDown&&("officeCode"==o.name?(console.log(this.city),this.getOffices(this.city).subscribe(s=>{console.log(s),o.isDropDown.options=s}),console.log(o.isDropDown.options)):"country"==o.name?this.getCountries().subscribe(s=>{o.isDropDown.options=s}):"userCode"==o.name?this.getUsers().subscribe(s=>{o.isDropDown.options=s}):"city"==o.name?(console.log(this.officelist),this.getCities(this.officelist).subscribe(s=>{this.city=s,console.log(this.city),o.isDropDown.options=this.city})):"status"==o.name?this.getStatus().subscribe(s=>{o.isDropDown.options=s,console.log(s)}):"lang"==o.name?this.getLang(this.officelist).subscribe(s=>{o.isDropDown.options=s}):"decoration"==o.name?o.isDropDown.options=this.getDecorations():"template"==o.name&&this.getTemplates().subscribe(s=>{console.log(s),o.isDropDown.options=s}));return null}getStatus(){return this.httpService.get("inComing/getStauts").pipe((0,c.U)(e=>(console.log(e),e)))}getCountries(){return this.httpService.get("Composer/getCountries").pipe((0,c.U)(e=>e.body))}getUsers(){let e=localStorage.getItem("office");return this.httpService.get(`Composer/getUsersName?office=${e}`).pipe((0,c.U)(o=>(console.log(o),o.body)))}getTemplates(){return this.httpService.get("inComing/getTemplates").pipe((0,c.U)(e=>e))}getCities(e){return this.httpService.get("Composer/InterCities"+(e=void 0!==e?`?code=${e}`:"?code=EG")).pipe((0,c.U)(o=>o.body))}setCityList(e){console.log("city fun",e),this.getCities(e).subscribe(o=>{this.city=o.body,console.log(o);for(let s of this.cols)"country"==s.name&&(this.cols[4].isDropDown.options=o,this.cols[5].isDropDown.options=null)})}getOffices(e){let o;return console.log("office fun",e,typeof e),console.log("-------------------------------------------"),e=void 0!==e&&"string"==typeof e?`${e}`:"",this.router.url.includes("in")?o="getPostalOffices":this.router.url.includes("out")&&(o="getOriginOffice"),this.httpService.get(`Composer/${o}?cityCode=${e}`).pipe((0,c.U)(s=>s.body))}setOfficeList(e){this.getOffices(e).subscribe(o=>{for(let s of this.cols)"city"==s.name&&(console.log(this.cols[5].isDropDown.options,this.cols[5].name),this.cols[5].isDropDown.options=o)})}getDecorations(){return[{label:"\u0628\u062f\u0648\u0646  ",value:0},{label:"\u0645\u0632\u0631\u0643\u0634",value:1},{label:"\u0645\u0632\u0631\u0643\u0634 \u0631\u062c\u0627\u0644 \u0623\u0639\u0645\u0627\u0644",value:2}]}getLang(e="EG"){return console.log("conntry",e),this.httpService.get(`Composer/getLanguage?countryCode=${e}`).pipe((0,c.U)(o=>o.body))}formatDate(e){return e=new d.uU("en-US").transform(e,"dd/MM/yyyy")?.toString(),console.log(e),e}static#t=this.\u0275fac=function(o){return new(o||u)(t.LFG(g.O),t.LFG(D.F0))};static#e=this.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()}}]);